# HR æ™ºèƒ½åŠ©æ‰‹ (RAG-Powered HR Assistant)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **RAG (Retrieval-Augmented Generation)** æ¶æ„å’Œ **CrewAI** æ¡†æ¶æ„å»ºçš„æ™ºèƒ½ HR åŠ©æ‰‹ã€‚å®ƒèƒ½å¤Ÿé€šè¿‡ä¸€ä¸ª Web ç•Œé¢æ¥æ”¶ç”¨æˆ·å…³äº HR æ”¿ç­–çš„æé—®ï¼Œå¹¶ä»å†…éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œç”Ÿæˆå‡†ç¡®ã€å¯é çš„å›ç­”ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **åç«¯ API**:
  - **æ–‡ä»¶ä¸Šä¼ **: é€šè¿‡ `POST /upload` æ¥å£ï¼Œæ”¯æŒä¸Šä¼  PDF å’Œ DOCX æ–‡æ¡£æ¥åŠ¨æ€æ›´æ–°çŸ¥è¯†åº“ã€‚
  - **æ™ºèƒ½é—®ç­”**: é€šè¿‡ `POST /query` æ¥å£ï¼Œæ¥æ”¶ç”¨æˆ·é—®é¢˜ï¼Œè¿”å›ç”± AI ç”Ÿæˆçš„ç­”æ¡ˆåŠç›¸å…³çš„æºæ–‡æ¡£ä¿¡æ¯ã€‚
  - **CORS æ”¯æŒ**: å·²å¯ç”¨è·¨åŸŸèµ„æºå…±äº«ï¼Œå…è®¸å‰ç«¯åº”ç”¨è°ƒç”¨ã€‚
- **å‰ç«¯ç•Œé¢**:
  - **ç”¨æˆ·è®¤è¯**: åŸºäºå¯†ç çš„ç®€å•ç™»å½•é¡µé¢ï¼Œä¿æŠ¤åº”ç”¨è®¿é—®ã€‚
  - **å®æ—¶èŠå¤©**: ç°ä»£åŒ–çš„èŠå¤©ç•Œé¢ï¼Œæ”¯æŒå®æ—¶é—®ç­”äº¤äº’å’Œæ‰“å­—æœºæ•ˆæœã€‚
  - **æ–‡ä»¶ä¸Šä¼ **: å‹å¥½çš„æ‹–æ‹½å¼æ–‡ä»¶ä¸Šä¼ é¡µé¢ï¼Œæ–¹ä¾¿ HR ç®¡ç†å‘˜æ›´æ–°çŸ¥è¯†åº“ã€‚
  - **ä¼šè¯ä¿æŒ**: èŠå¤©è®°å½•ä¼šè‡ªåŠ¨ä¿å­˜åœ¨æµè§ˆå™¨ä¼šè¯ä¸­ï¼Œåˆ·æ–°é¡µé¢ä¸ä¸¢å¤±ã€‚
- **æ ¸å¿ƒ RAG æµç¨‹**:
  - **ä¸¤é˜¶æ®µæ£€ç´¢**: ä½¿ç”¨ Milvus (L2 è·ç¦») è¿›è¡Œå¿«é€Ÿå‘é‡å¬å›ï¼Œå†ç”± Cohere Reranker æ¨¡ï¿½ï¿½ï¿½è¿›è¡Œé«˜ç²¾åº¦ç²¾æ’ã€‚
  - **ç›¸å…³æ€§è¿‡æ»¤**: åœ¨ç²¾æ’é˜¶æ®µè®¾ç½®äº†ç›¸å…³æ€§é˜ˆå€¼ï¼Œç¡®ä¿åªæœ‰é«˜åº¦ç›¸å…³çš„æ–‡æ¡£æ‰è¢«ç”¨äºç­”æ¡ˆç”Ÿæˆï¼Œæœ‰æ•ˆé¿å…äº†å†…å®¹å¹»è§‰ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python, FastAPI, CrewAI, LangChain, Milvus, Cohere
- **å‰ç«¯**: React, Vite, TypeScript, Tailwind CSS, shadcn/ui

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»å®‰è£…å¹¶è¿è¡Œäº†ä»¥ä¸‹æœåŠ¡ï¼š

- **Python** (ç‰ˆæœ¬ >=3.10, <3.14)
- **Node.js** (æ¨è v20.10.0 æˆ–æ›´é«˜ç‰ˆæœ¬)
- **Milvus**: ä¸€ä¸ªè¿è¡Œä¸­çš„ Milvus å®ä¾‹ã€‚
- **AWS CLI**: é…ç½®å¥½æ‚¨çš„ AWS å‡­è¯ï¼Œå› ä¸ºæœ¬é¡¹ç›®ä¾èµ–äº Amazon Bedrockã€‚

### 2. å®‰è£…ä¾èµ–

æœ¬é¡¹ç›®åˆ†ä¸ºåç«¯ (`rag`) å’Œå‰ç«¯ (`frontend`) ä¸¤ä¸ªéƒ¨åˆ†ï¼Œéœ€è¦åˆ†åˆ«å®‰è£…ä¾èµ–ã€‚

**a. å®‰è£…åç«¯ä¾èµ–:**

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…æ‰€æœ‰ Python ç›¸å…³çš„åº“ï¼š

```bash
# å®‰è£… uvï¼ˆä¸€ä¸ªå¿«é€Ÿçš„ Python åŒ…å®‰è£…å™¨ï¼‰
pip install uv

# ä½¿ç”¨ uv å®‰è£…é¡¹ç›®ä¾èµ–
uv pip install -e .
```

**b. å®‰è£…å‰ç«¯ä¾èµ–:**

è¿›å…¥ `frontend` ç›®å½•ï¼Œå¹¶ä½¿ç”¨ `npm` å®‰è£…ä¾èµ–ï¼š

```bash
cd frontend
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `rag` æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `.env` çš„æ–‡ä»¶ï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ã€‚è¯·å°† `YOUR_...` æ›¿æ¢ä¸ºæ‚¨ï¿½ï¿½ï¿½å®é™…é…ç½®ã€‚

```env
# .env

# AWS Bedrock ç›¸å…³é…ç½®
AWS_REGION="us-east-1"  # æˆ–è€…æ‚¨é€‰æ‹©çš„åŒºåŸŸ
EMBEDDING_MODEL="amazon.titan-embed-text-v2:0"
# ä½ å¯ä»¥æ¢æˆå¯¹åº”çš„openai/openai-embeddingæ¨¡å‹ï¼Œç„¶åå–æ¶ˆrerank
RERANK_MODEL= # æˆ–è€… cohere.rerank-english-v3.0
# æ³¨æ„ï¼šè¯·æ ¹æ®æ‚¨çš„ Bedrock æ¨¡å‹è®¿é—®æƒé™å¡«å†™æ­£ç¡®çš„æ¨¡å‹ID

# Milvus æ•°æ®åº“é…ç½®
MILVUS_HOST="localhost" # Milvus æœåŠ¡çš„ä¸»æœºåœ°å€
MILVUS_PORT="19530"     # Milvus æœåŠ¡çš„ç«¯å£
```

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¯åŠ¨ API æœåŠ¡

è¦å¯åŠ¨åç«¯çš„ FastAPI æœåŠ¡ï¼Œè¯·åœ¨**é¡¹ç›®æ ¹ç›®å½•**ä¸‹è¿è¡Œï¼š

```bash
python -m rag.main serve
```

æœåŠ¡å¯åŠ¨åï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://127.0.0.1:8000/docs` æ¥æŸ¥çœ‹å’Œæµ‹è¯•äº¤äº’å¼çš„ API æ–‡æ¡£ã€‚

### å¯åŠ¨å‰ç«¯åº”ç”¨

è¦å¯åŠ¨å‰ç«¯çš„ React åº”ç”¨ï¼Œè¯·**æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯**ï¼Œè¿›å…¥ `frontend` ç›®å½•å¹¶è¿è¡Œï¼š

```bash
cd frontend
npm run dev
```

åº”ç”¨å¯åŠ¨åï¼Œæ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:5173` (æˆ–ç»ˆç«¯æç¤ºçš„å…¶ä»–åœ°å€)ã€‚

- **ç™»å½•å¯†ç **: `your-super-secret-password` (åœ¨ `src/pages/LoginPage.tsx` ä¸­ç¡¬ç¼–ç )

### ä¸Šä¼ æ–‡ä»¶ (æ›´æ–°çŸ¥è¯†åº“)

æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å‘çŸ¥è¯†åº“ä¸­æ·»åŠ æ–°æ–‡æ¡£ï¼š

**a. é€šè¿‡ Web ç•Œé¢ä¸Šä¼  (æ¨è)**

1.  å¯åŠ¨å‰ç«¯å’Œåç«¯æœåŠ¡ã€‚
2.  åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å‰ç«¯åº”ç”¨å¹¶ç™»å½•ã€‚
3.  ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ "Upload Document" æŒ‰é’®ã€‚
4.  å°†æ‚¨çš„ PDF æˆ– DOCX æ–‡ä»¶æ‹–æ‹½åˆ°ä¸Šä¼ åŒºåŸŸï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ã€‚
5.  ç‚¹å‡» "Upload" æŒ‰é’®ï¼Œç­‰å¾…å¤„ç†å®Œæˆã€‚

**b. é€šè¿‡ `curl` å‘½ä»¤ä¸Šä¼ **

å¦‚æœæ‚¨å¸Œæœ›é€šè¿‡å‘½ä»¤è¡Œç›´æ¥ä¸ API äº¤äº’ï¼Œå¯ä»¥ä½¿ç”¨ `curl`ï¼š

```bash
curl -X POST "http://127.0.0.1:8000/upload" \
     -H "Content-Type: multipart/form-data" \
     -F "file=@/path/to/your/document.pdf"
```
> å°† `/path/to/your/document.pdf` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…æ–‡ä»¶è·¯å¾„ã€‚

### è¿›è¡Œé—®ç­”æŸ¥è¯¢

**a. é€šè¿‡ Web ç•Œé¢æŸ¥è¯¢**

åœ¨å‰ç«¯åº”ç”¨çš„èŠå¤©æ¡†ä¸­è¾“å…¥æ‚¨çš„é—®é¢˜ï¼Œç„¶åæŒ‰ `Enter` æˆ–ç‚¹å‡» "Send" æŒ‰é’®ã€‚

**b. é€šè¿‡ `curl` å‘½ä»¤æŸ¥è¯¢**

```bash
curl -X POST "http://127.0.0.1:8000/query" \
     -H "Content-Type: application/json" \
     -d '{"query": "å…¬å¸çš„ä¼‘å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"}'
```

### (å¯é€‰) ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œè®­ç»ƒå’ŒæŸ¥è¯¢

æœ¬é¡¹ç›®ä¿ç•™äº†åŸå§‹çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ–¹ä¾¿è¿›è¡Œå¿«é€Ÿæµ‹è¯•ã€‚

- **å¤„ç†å•ä¸ªæ–‡æ¡£ (è®­ç»ƒ):**
  ```bash
  python -m rag.main train /path/to/your/document.pdf
  ```

- **è¿è¡Œå•ä¸ªæŸ¥è¯¢:**
  ```bash
  python -m rag.main run "ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ"
  ```

- **é‡ç½®æ•°æ®åº“:**
  > **è­¦å‘Š**: æ­¤å‘½ä»¤ä¼šåˆ é™¤ Milvus ä¸­çš„æ•´ä¸ªé›†åˆï¼Œæ‰€æœ‰å·²ä¸Šä¼ çš„çŸ¥è¯†éƒ½å°†ä¸¢å¤±ã€‚
  ```bash
  python -m rag.main reset-db
  ```
